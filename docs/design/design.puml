@startuml

' Presentation Layer
package "Presentation Layer" {
    class CustomerUI {
        +start()
        +showWelcomeScreen()
        +browseMenu()
        +customizeItem()
        +reviewOrder()
        +orderPayment()
    }

    class CashierUI {
        +start()
        +showOrderList()
        +showOrderDetails(orderID: int)
        +showCounterPayment(orderID: int)
    }

    class KitchenUI {
        +start()
        +showOrderQueue()
    }

    class ManagerUI {
        +start()
        +showManagementDashboard()
        +showDailySalesSummary(date: Date)
    }

    class CustomerAppController {
        +startOrder()
        +browseMenu()
        +addItemToOrder(itemID: int, quantity: int, customizations: String)
        +reviewCurrentOrder(): Order
        +confirmOrder(): Order
        +payOnSystem(cardInfo: PaymentInfo)
    }

    class CashierAppController {
        +listPendingCounterPayments(): List<Order>
        +findOrder(orderID: int): Order
        +completeCounterPayment(orderID: int, paymentMethod: PaymentMethod)
    }

    class KitchenAppController {
        +getOrderQueue(): List<Order>
        +markInPreparation(orderID: int)
        +markReady(orderID: int)
        +cancelOrder(orderID: int)
    }

    class ManagerAppController {
        +listMenuItems(): List<MenuItem>
        +addMenuItem(name: String, price: double, category: String, description: String)
        +updateMenuItem(itemID: int, price: double, description: String)
        +showDailySalesSummary(date: Date): DailySalesSummary
    }
}

' Domain Layer
package "Domain Layer" {

    interface OrderingServiceInterface {
        +createOrder(): Order
        +addItem(orderID: int, itemID: int, quantity: int, customizations: String): void
        +editItem(orderID: int, itemID: int, quantity: int, customizations: String): void
        +removeItem(orderID: int, itemID: int): void
        +reviewOrder(orderID: int): Order
        +getOrderByID(orderID: int): Order
        +confirmOrder(orderID: int): void
    }

    interface PaymentServiceInterface {
        +processSystemCardPayment(orderID: int, cardInfo: PaymentInfo): Payment
        +markPayAtCounter(orderID: int)
        +completeCounterPayment(orderID: int, paymentMethod: PaymentMethod): Payment
    }

    interface KitchenServiceInterface {
        +getOrderQueue(): List<Order>
        +markInPreparation(orderID: int): void
        +markReady(orderID: int): void
        +cancelOrder(orderID: int): void
    }

    interface MenuServiceInterface {
        +getMenuCategories(): List<String>
        +getMenuItemsByCategory(category: String): List<MenuItem>
        +getItemDetails(itemID: int): MenuItem
        +addNewMenuItem(name: String, price: double, category: String, description: String): MenuItem
        +updateExistingMenuItem(itemID: int, price: double, category: String, description: String): void
        +getMenuItemById(itemID: int): MenuItem
    }

    interface ReportServiceInterface {
        +generateDailySalesSummary(date: Date): DailySalesSummary
    }

    class OrderingService {
        -orderInterface: OrderInterface
        -menuInterface: MenuInterface

        +createOrder(): Order
        +addItem(orderID: int, itemID: int, quantity: int, customizations: String): void
        +editItem(orderID: int, itemID: int, quantity: int, customizations: String): void
        +removeItem(orderID: int, itemID: int): void
        +reviewOrder(orderID: int): Order
        +getOrderByID(orderID: int): Order
        +confirmOrder(orderID: int): void
    }

    class PaymentService {
        -orderInterface: OrderInterface
        -paymentInterface: PaymentInterface

        +processSystemCardPayment(orderID: int, cardInfo: PaymentInfo): Payment
        +markPayAtCounter(orderID: int)
        +completeCounterPayment(orderID: int, paymentMethod: PaymentMethod): Payment
    }

    class KitchenService {
        -orderInterface: OrderInterface

        +getOrderQueue(): List<Order>
        +markInPreparation(orderID: int): void
        +markReady(orderID: int): void
        +cancelOrder(orderID: int): void
    }

    class MenuService {
        -menuInterface: MenuInterface

        +getMenuCategories(): List<String>
        +getMenuItemsByCategory(category: String): List<MenuItem>
        +getItemDetails(itemID: int): MenuItem
        +addNewMenuItem(name: String, price: double, category: String, description: String): MenuItem
        +updateExistingMenuItem(itemID: int, price: double, category: String, description: String): void
        +getMenuItemById(itemID: int): MenuItem
    }

    class ReportService {
        -orderInterface: OrderInterface
        -paymentInterface: PaymentInterface

        +generateDailySalesSummary(date: Date): DailySalesSummary
    }
}

' Datasource Layer
package "Datasource Layer" {
    enum OrderStatus {
        CREATED
        CONFIRMED
        IN_PREPARATION
        READY
        CANCELLED
        COMPLETED
    }

    enum PaymentMethod {
        CARD
        CASH_AT_COUNTER
    }

    enum PaymentStatus {
        PENDING
        SUCCESS
        FAILED
    }
    
    class Order {
        -id: String
        -items: List<OrderItem>
        -status: OrderStatus
        -createdAt: Date
        -totalAmount: double
        +addItem(menuItem: MenuItem, quantity: int, customizations: String): void
        +editItem(itemID: int, quantity: int, customizations: String): void
        +removeItem(itemID: int): void
        +markCreated(): void
        +markConfirmed(): void
        +markInPreparation(): void
        +markReady(): void
        +markCancel(): void
        +markComplete(): void
        +calculateTotal(): double
    }

    class OrderItem {
        -menuItem: MenuItem
        -quantity: int
        -unitPrice: double
        -customizations: String
        +getItemTotal(): double
    }

    class MenuItem {
        -id: String
        -name: String
        -price: double
        -category: String
        -description: String
    }

    class Payment {
        -id: String
        -orderID: int
        -amount: double
        -method: PaymentMethod
        -status: PaymentStatus
        -paidAt: Date
    }

    class PaymentInfo {
        -cardNumber: String
        -cardHolderName: String
        -cardExpirationDate: Date
        -cardCVV: String
    }

    class DailySalesSummary {
        -date: Date
        -totalRevenue: double
        -numberOfOrders: int
        -topSellingItems: List<MenuItem>
    }

    interface OrderInterface {
        +save(order: Order): void
        +findById(id: String): Order
        +findByStatus(status: OrderStatus): List<Order>
    }

    interface MenuInterface {
        +save(item: MenuItem): void
        +findAll(): List<MenuItem>
        +findById(id: String): MenuItem
        +findByCategory(category: String): List<MenuItem>
    }

    interface PaymentInterface {
        +save(payment: Payment): void
        +findByDate(date: Date): List<Payment>
    }

    class Database {
        -connectionString: String
        +executeQuery(sql: String): Object
    }
}

CustomerUI --> CustomerAppController
CashierUI --> CashierAppController
KitchenUI --> KitchenAppController
ManagerUI --> ManagerAppController
CustomerAppController --> OrderingServiceInterface
CustomerAppController --> PaymentServiceInterface
CustomerAppController --> MenuServiceInterface
CashierAppController --> OrderingServiceInterface
CashierAppController --> PaymentServiceInterface
KitchenAppController --> KitchenServiceInterface
ManagerAppController --> MenuServiceInterface
ManagerAppController --> ReportServiceInterface
OrderingServiceInterface <|.. OrderingService
PaymentServiceInterface <|.. PaymentService
KitchenServiceInterface <|.. KitchenService
MenuServiceInterface <|.. MenuService
ReportServiceInterface <|.. ReportService
Order *-- "many" OrderItem
OrderItem --> MenuItem
OrderInterface --> Order
MenuInterface --> MenuItem
PaymentInterface --> Payment
class SqlOrder
class SqlMenu
class SqlPayment
OrderInterface <|.. SqlOrder
MenuInterface <|.. SqlMenu
PaymentInterface <|.. SqlPayment
SqlOrder --> Database
SqlMenu --> Database
SqlPayment --> Database
OrderingService --> OrderInterface
OrderingService --> MenuInterface
PaymentService --> OrderInterface
PaymentService --> PaymentInterface
KitchenService --> OrderInterface
MenuService --> MenuInterface
ReportService --> OrderInterface
ReportService --> PaymentInterface
DailySalesSummary --> MenuItem
CustomerAppController --> PaymentInfo
PaymentService --> PaymentInfo

@enduml